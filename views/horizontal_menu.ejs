<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title><%= user.company_name %></title>
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/horizontalmenu.css">
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-NJ44ZN37');</script>
    <!-- End Google Tag Manager -->
    <style>
        div.scrollmenu a.nav-link.active {
            border: 1px solid <%= background_color %>;
        }
    </style>
</head>

<body data-bs-spy="scroll" data-bs-target="#categories-list" data-bs-offset="50">

     <!-- Loading Screen -->
     <div id="loading-screen">
        <span class="loader"></span>
    </div>
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJ44ZN37"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <script src="/js/translate.js"></script>
    <!-- Google Translate Element -->
    <div id="translater"></div>

    <div class="responsive-image">
        <img src="<%= backgroundImage %>" alt="Restaurant Logo" class="logo-image">
    </div>
    <div class="container" id="translate"  style="padding-top:40px; padding-bottom:60px;">
        <div>
            <div class="col scrollmenu" id="categories-list">
                <% categories.forEach(function (category) { %>
                    <a class="nav-link" href="#category-<%= category.category_id %>"><%= category.category_name %></a>
                <% }); %>
            </div>
            <div class="col items" style="text-align: center; margin-top:30px;">
                <% categories.forEach(function (category) { %>
                    <div id="category-<%= category.category_id %>">
                        <a class="link" style="position: relative;"><%= category.category_name %></a>
                        <div style="border-bottom: 2px solid <%= background_color %>; width: 50%; text-align: center; margin:auto;"></div>
                        <div style="text-align: left; margin-top: 20px;">
                            <div>
                                <%  category.items.forEach(function (item) { %>
                                    <div class="custom-card" onclick="openModal('<%= item.item_name %>', '<%= item.price %> <%= currency %>', '<%= item.description %>', '<%= item.image ? item.image : '/img/light_gray.jpg' %>', '<%= item.allergies %>', '<%= item.food_type %>')">
                                        <% if (item.image) { %>
                                            <img src="<%= item.image %>" alt="<%= item.item_name %>">
                                        <% } else { %>
                                        <% } %>
                                        <div class="card-content">
                                            <h5><%= item.item_name %></h5>
                                            <% if (item.food_type === 'Vegan') { %>
                                                <div class="vegan-badge">
                                                    <img src="/img/vegan.jpg" style="max-width: 30px; max-height: 30px;" alt="">
                                                </div>
                                            <% } else if (item.food_type === 'Vegetarian') { %>
                                                <div class="vegan-badge">
                                                    <img src="/img/vegetarian.jpg" style="max-width: 30px; max-height: 30px;" alt="">
                                                </div>
                                            <% } %>
                                            <div class="price"><%= item.price %> <%= currency %></div>
                                            <div class="description"><%= item.description.length > 120 ? item.description.substring(0, 120) + '...' : item.description %></div>
                                            <div class="allergy-letter">
                                                <% if (item.allergies) { %>
                                                    <% item.allergies.forEach(allergy => { %>
                                                        (<%= allergy %>)
                                                    <% }) %>
                                                <% } %>
                                            </div>
                                        </div>
                                    </div>
                                <% }); %>
                            </div>
                        </div>
                    </div>
                <% }); %>
            </div>
        </div>
    </div>

    <div id="myModal" class="modal">
        <div class="modal-content">
            <span id="close-menu" class="close">&times;</span>
            <img id="modalImage" class="imagemodel" src="" alt="">
            <div class="col-2"></div>
            <div class="modal-header">
                <h2 id="modalItemName"></h2>
                <div id="modalFoodType" class="food-type-info">
                    <img id="modalFoodTypeImage" class="imagemodel" src="" alt="">
                </div>
            </div>
            <div id="modalPrice"></div>
            <p id="modalDescription"></p>
            <div id="modalAllergy" class="allergy-info"></div>
        </div>
    </div>

    <div id="loadingScreen" class="modal">
        <div class="loading-content">
            <img class="loadingimage" src="/img/loadingmodel.gif" alt="">
        </div>
    </div>

    <footer style="text-align: center; padding: 20px 0; background-color: #f8f9fa; color: #6c757d;">
        <p>Powered by <a href="https://easymenu.com" target="_blank" style="text-decoration: none; color: #007bff;">Easy Menu</a></p>
    </footer>
    <!-- Include jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="/js/menu.js"></script>
</body>

</html>
